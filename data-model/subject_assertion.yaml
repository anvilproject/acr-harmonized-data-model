id: https://anvilproject.org/acr-harmonized-data-model/condition_assertion 
name: anvil-condition-assertion-schema
prefixes:
  anvil: 
    prefix_prefix: anvil
    prefix_reference: https://anvilproject.org/acr-harmonized-data-model/
  linkml:
    prefix_prefix: linkml
    prefix_reference: https://w3id.org/linkml/
  bioregistry: 
    prefix_prefix: bioregistry 
    prefix_reference: https://bioregistry.io/registry#
  igcondtype: 
    prefix_prefix: igcondtype 
    prefix_reference: https://nih-ncpi.github.io/ncpi-fhir-ig-2/CodeSystem/condition-type
imports:
  - linkml:types
  - anvil_core
classes: 
  SubjectAssertion:
    title: Subject Assertion
    description: Generic template for linking information with a given Subject.
    is_a: Thing
    slots:
      - age_at_assertion 
      - assertion
      - value
      - source_assertion
      - source_value
  ConditionAssertion:
    title: ConditionAssertion 
    description: Study Meta Data 
    is_a: SubjectAssertion 
    slots: 
      - condition_type
      - age_at_onset 
      - age_at_resolution 
  CodedTerm:
    title: Coded term
    description: A term that includes a string value as well as an associated uri or curie.
    attributes:
      code:
        range: uriorcurie
      code_string:
        range: string
  Quantity:
    title: Quantity
    description: A numeric value and unit
    attributes:
      value:
        range: Any
        any_of:
          - range: integer
          - range: decimal
      unit:
        range: CodedTerm
slots: 
  assertion:
    title: Assertion
    description: The assertion that is being made.
    range: CodedTerm
    inlined: true
  source_assertion:
    title: Source Assertion
    description: The assertion that is being made as originally recorded.
    range: CodedTerm
    inlined: true
  value:
    title: Value
    description: The value of the assertion that is being made.
    range: Any
    any_of:
      - range: CodedTerm
      - range: Quantity
    inlined: true
  source_value:
    title: Source Value
    description: The value of the assertion that is being made as originally recoded.
    range: Any
    any_of:
      - range: CodedTerm
      - range: Quantity
    inlined: true
  condition_code:
    description: | 
      Condition Code should be from one of a recognized ontology. Multiple codes can be indicated, but should simply be alternative encodings for the same entity such as alternates encodings from other ontologies.       
      Recommended ontologies include: SNOMED_CT, HP, OMIM and ORPHA and coded with the corresponding curies
      * SNOMED : https://bioregistry.io/registry/snomedct
      * HP : https://bioregistry.io/registry/hp
      * OMIM : https://bioregistry.io/registry/omim
      * ORPHA : https://bioregistry.io/registry/orphanet
    title: condition_code 
    range: EnumConditionCode
    required: false 
    multivalued: true  
  condition_source_value: 
    description: Original Source Value for condition 
    title: condition_source_value 
    range: string 
    required: true 
    multivalued: false 
  condition_assertion: 
    description: Condition Assertion 
    title: condition_assertion 
    range: EnumConditionAssertion
    multivalued: false
  condition_type: 
    description: Does this condition represent a specific "type" of condition, such as "Phenotypic Feature" vs "Disease" in a rare disease setting.
    title: Condition Type 
    range: EnumConditionType 
    required: true 
    multivalued: false 
  age_at_assertion:
    description: The age at which this condition is being asserted. 
    title: age_at_assertion 
    range: integer 
    required: false 
    multivalued: false 
  age_at_onset:
    description: The age of onset for this condition. 
    title: age_at_assertion 
    range: integer
    required: false 
    multivalued: false 
  age_at_resolution:
    description: The age at which this condition was resolved, abated or cured. Should be left empty in cases of current active status.  
    title: age_at_resolution 
    range: integer
    required: false 
    multivalued: false 
enums: 
# TODO: Revisit this and refine the semantics here, ideally with links out to other definitions.
  EnumConditionType: 
    description: Provides options to describe the expressed semantics of a condition. 
    permissible_values: 
      phenotypic_feature: 
        title: Phenotypic Feature
        description: This is a phenotypic feature
        meaning: igcondtype:Phenotypic-Feature
      disease: 
        title: disease 
        description: Disease 
        meaning: igcondtype:Disease
      comorbidity: 
        title: comorbidity 
        description: Comorbidity
        meaning: igcondtype:Comorbidity
      histology: 
        title: histology 
        description: Histology 
        meaning: igcondtype:Histology
      clinical_finding: 
        title: clinical-finding 
        description: Clinical Finding 
        meaning: igcondtype:Clinical-Finding
      ehr_billing_code:
        title: EHR Billing Code 
        description: From an EHR billing record, which may indicate only investigation into a possible diagnosis.
        #meaning: igcondtype:EHR-Condition-Code
  EnumConditionAssertion:
    description: Enumerations for Condition Assertion 
    permissible_values: 
      present: 
        title: Present 
        description: Present 
      absent: 
        title: Absent 
        description: Absent 
      unsure: 
        title: Unsure 
        description: Unsure 
      unknown: 
        title: Unknown 
        description: Unknown 
  EnumConditionCode:
    description: |
      Recommended ontologies include: SNOMED_CT, HP, OMIM and ORPHA, prefixed with those curies
      * SNOMED : https://bioregistry.io/registry/snomedct
      * HP : https://bioregistry.io/registry/hp
      * OMIM : https://bioregistry.io/registry/omim
      * ORPHA : https://bioregistry.io/registry/orphanet
    # include: 
      # https://bioregistry.io/registry/snomedct
      # - reachable_from: 
      #   source_ontology: bioregistry:snomedct
      #  is_direct: true 
      # https://bioregistry.io/registry/hp
      # - reachable_from: 
      #   source_ontology: bioregistry:hp 
      #  is_direct: true 
      # https://bioregistry.io/registry/omim
      # - reachable_from:
      #   source_ontology: bioregistry:omim 
      #  is_direct: true 
      # https://bioregistry.io/registry/orphanet
      # - reachable_from: 
      #   source_ontology: bioregistry:orphanet 
      #  is_direct: true 

    